<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait used to customize the behavior and the limits of the LRU map."><title>Limiter in schnellru - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="schnellru" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.1 (eb26296b5 2023-08-03)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../schnellru/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../schnellru/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Limiter</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.KeyToInsert">KeyToInsert</a></li><li><a href="#associatedtype.LinkType">LinkType</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.is_over_the_limit">is_over_the_limit</a></li><li><a href="#tymethod.on_cleared">on_cleared</a></li><li><a href="#tymethod.on_grow">on_grow</a></li><li><a href="#tymethod.on_insert">on_insert</a></li><li><a href="#tymethod.on_removed">on_removed</a></li><li><a href="#tymethod.on_replace">on_replace</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In schnellru</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">schnellru</a>::<wbr><a class="trait" href="#">Limiter</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/schnellru/lib.rs.html#149-231">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Limiter&lt;K, V&gt; {
    type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt;;
    type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a>: LinkType;

    // Required methods
    fn <a href="#tymethod.is_over_the_limit" class="fn">is_over_the_limit</a>(&amp;self, length: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.on_insert" class="fn">on_insert</a>(
        &amp;mut self,
        length: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>,
        key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
        value: V
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.71.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.tuple.html">(K, V)</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.on_replace" class="fn">on_replace</a>(
        &amp;mut self,
        length: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>,
        old_key: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut K</a>,
        new_key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
        old_value: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut V</a>,
        new_value: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut V</a>
    ) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.on_removed" class="fn">on_removed</a>(&amp;mut self, key: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut K</a>, value: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut V</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.on_cleared" class="fn">on_cleared</a>(&amp;mut self);
<span class="item-spacer"></span>    fn <a href="#tymethod.on_grow" class="fn">on_grow</a>(&amp;mut self, new_memory_usage: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.bool.html">bool</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait used to customize the behavior and the limits of the LRU map.</p>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.KeyToInsert" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#157">source</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt;</h4></section></summary><div class="docblock"><p>The type of the key to be inserted into the map.</p>
<p>This is the type which is passed into <code>insert</code>.</p>
<p>This usually should be the same as <code>K</code>, but can be set to a different type
if creating an instance of <code>K</code> is not zero-cost and we want to achieve
zero-cost replacement of existing values through <code>insert</code>.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.LinkType" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#173">source</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a>: LinkType</h4></section></summary><div class="docblock"><p>The type used to hold the links between the nodes inside of the LRU map.</p>
<p>In practice this type determines the maximum number of elements that can be in the map,
regardless of any other limits imposed on it.</p>
<p>The exact limit is implementation defined.</p>
<p>The narrower the type the less memory each element in the map
will use, and the map should also get slightly faster as long
as this limit will not be hit.</p>
<p>Can be one of: <code>usize</code>, <code>u32</code>, <code>u16</code>, <code>u8</code>.</p>
<p>You probably want to use either <code>usize</code> or <code>u32</code> here.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.is_over_the_limit" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#181">source</a><h4 class="code-header">fn <a href="#tymethod.is_over_the_limit" class="fn">is_over_the_limit</a>(&amp;self, length: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Checks whether any of the elements must be popped.</p>
<p>This is called before an element is inserted, and after it was inserted.</p>
<p>The <code>length</code> specifies how many elements will be in the map or how many are currently
in the map, depending on whether this was called before or after an insert.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_insert" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#192">source</a><h4 class="code-header">fn <a href="#tymethod.on_insert" class="fn">on_insert</a>(
    &amp;mut self,
    length: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>,
    key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
    value: V
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.71.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.tuple.html">(K, V)</a>&gt;</h4></section></summary><div class="docblock"><p>Called <em>before</em> a node is inserted into the map.</p>
<p>Should return <code>None</code> if it would be impossible to insert a given element into an empty map.
Otherwise should always return <code>Some</code> and, if applicable, update its internal cost estimate.</p>
<p>Changing the key here in a way that hashes or compares differently is a logic error.</p>
<p>The <code>length</code> specifies how many elements are currently in the map.
The <code>key</code> and <code>value</code> is the key and value of the element we’re about to insert.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_replace" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#204-211">source</a><h4 class="code-header">fn <a href="#tymethod.on_replace" class="fn">on_replace</a>(
    &amp;mut self,
    length: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>,
    old_key: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut K</a>,
    new_key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
    old_value: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut V</a>,
    new_value: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut V</a>
) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Called <em>before</em> a node is replaced inside of the map.</p>
<p>Should return <code>false</code> if it would be impossible to insert a given element into an empty map.
Otherwise should always return <code>true</code> and, if applicable, update its internal cost estimate.</p>
<p>Changing the key here in a way that hashes or compares differently is a logic error.</p>
<p>The <code>length</code> specifies how many elements are currently in the map.
The <code>old_key</code> and <code>old_value</code> is the key and value that are already inside of the map.
The <code>new_key</code> and <code>new_value</code> is the key and value of the element we’re about to insert.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_removed" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#216">source</a><h4 class="code-header">fn <a href="#tymethod.on_removed" class="fn">on_removed</a>(&amp;mut self, key: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut K</a>, value: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.reference.html">&amp;mut V</a>)</h4></section></summary><div class="docblock"><p>Called <em>after</em> an element is removed from the map.</p>
<p>If applicable the internal cost estimate should be updated to account for the removed node.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_cleared" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#221">source</a><h4 class="code-header">fn <a href="#tymethod.on_cleared" class="fn">on_cleared</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Called <em>after</em> the map is cleared.</p>
<p>If applicable the internal cost estimate should be set to zero here.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_grow" class="method"><a class="srclink rightside" href="../src/schnellru/lib.rs.html#230">source</a><h4 class="code-header">fn <a href="#tymethod.on_grow" class="fn">on_grow</a>(&amp;mut self, new_memory_usage: <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Called <em>before</em> the map is resized.</p>
<p>Returns whether the map should be allowed to grow.</p>
<p>Returning <code>false</code> here will ensure that no memory will be allocated.</p>
<p>The <code>new_memory_usage</code> specifies how much memory the map will consume <em>after</em> the resize.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-ByLength" class="impl"><a class="srclink rightside" href="../src/schnellru/limiters.rs.html#25-65">source</a><a href="#impl-Limiter%3CK,+V%3E-for-ByLength" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.ByLength.html" title="struct schnellru::ByLength">ByLength</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-1" class="associatedtype trait-impl"><a href="#associatedtype.KeyToInsert-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-1" class="associatedtype trait-impl"><a href="#associatedtype.LinkType-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.u32.html">u32</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-ByMemoryUsage" class="impl"><a class="srclink rightside" href="../src/schnellru/limiters.rs.html#86-122">source</a><a href="#impl-Limiter%3CK,+V%3E-for-ByMemoryUsage" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.ByMemoryUsage.html" title="struct schnellru::ByMemoryUsage">ByMemoryUsage</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-2" class="associatedtype trait-impl"><a href="#associatedtype.KeyToInsert-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-2" class="associatedtype trait-impl"><a href="#associatedtype.LinkType-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.u32.html">u32</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-Unlimited" class="impl"><a class="srclink rightside" href="../src/schnellru/limiters.rs.html#135-171">source</a><a href="#impl-Limiter%3CK,+V%3E-for-Unlimited" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.Unlimited.html" title="struct schnellru::Unlimited">Unlimited</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-3" class="associatedtype trait-impl"><a href="#associatedtype.KeyToInsert-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-3" class="associatedtype trait-impl"><a href="#associatedtype.LinkType-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.usize.html">usize</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-UnlimitedCompact" class="impl"><a class="srclink rightside" href="../src/schnellru/limiters.rs.html#180-216">source</a><a href="#impl-Limiter%3CK,+V%3E-for-UnlimitedCompact" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.UnlimitedCompact.html" title="struct schnellru::UnlimitedCompact">UnlimitedCompact</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-4" class="associatedtype trait-impl"><a href="#associatedtype.KeyToInsert-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-4" class="associatedtype trait-impl"><a href="#associatedtype.LinkType-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.71.1/std/primitive.u32.html">u32</a></h4></section></div></details></div><script src="../implementors/schnellru/trait.Limiter.js" async></script></section></div></main></body></html>