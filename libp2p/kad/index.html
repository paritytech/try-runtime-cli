<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implementation of the libp2p-specific Kademlia protocol."><title>libp2p::kad - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="libp2p" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.1 (eb26296b5 2023-08-03)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../crates.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="icon" href="https://libp2p.io/img/favicon.png"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../libp2p/index.html"><img src="https://libp2p.io/img/logo_small.png" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../libp2p/index.html"><img src="https://libp2p.io/img/logo_small.png" alt="logo"></a><h2 class="location"><a href="#">Crate kad</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.52.1</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a href="../index.html">libp2p</a>::<wbr><a class="mod" href="#">kad</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/libp2p_kad/lib.rs.html#21-117">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implementation of the libp2p-specific <a href="https://github.com/libp2p/specs/blob/master/kad-dht/README.md">Kademlia</a> protocol.</p>
<h2 id="important-discrepancies"><a href="#important-discrepancies">Important Discrepancies</a></h2>
<ul>
<li><strong>Peer Discovery with Identify</strong> In other libp2p implementations, the
<a href="https://github.com/libp2p/specs/tree/master/identify">Identify</a> protocol might be seen as a core protocol. Rust-libp2p
tries to stay as generic as possible, and does not make this assumption.
This means that the Identify protocol must be manually hooked up to Kademlia through calls
to <a href="struct.Kademlia.html#method.add_address" title="method libp2p::kad::Kademlia::add_address"><code>Kademlia::add_address</code></a>.
If you choose not to use the Identify protocol, and do not provide an alternative peer
discovery mechanism, a Kademlia node will not discover nodes beyond the network’s
<a href="https://docs.libp2p.io/concepts/glossary/#boot-node">boot nodes</a>. Without the Identify protocol,
existing nodes in the kademlia network cannot obtain the listen addresses
of nodes querying them, and thus will not be able to add them to their routing table.</li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="record/index.html" title="mod libp2p::kad::record">record</a><span class="stab deprecated" title="">Deprecated</span></div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AddProviderOk.html" title="struct libp2p::kad::AddProviderOk">AddProviderOk</a></div><div class="desc docblock-short">The successful result of publishing a provider record.</div></li><li><div class="item-name"><a class="struct" href="struct.Addresses.html" title="struct libp2p::kad::Addresses">Addresses</a></div><div class="desc docblock-short">A non-empty list of (unique) addresses of a peer in the routing table.</div></li><li><div class="item-name"><a class="struct" href="struct.BootstrapOk.html" title="struct libp2p::kad::BootstrapOk">BootstrapOk</a></div><div class="desc docblock-short">The successful result of <a href="struct.Kademlia.html#method.bootstrap" title="method libp2p::kad::Kademlia::bootstrap"><code>Kademlia::bootstrap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.EntryView.html" title="struct libp2p::kad::EntryView">EntryView</a></div><div class="desc docblock-short">A cloned, immutable view of an entry that is either present in a bucket
or pending insertion.</div></li><li><div class="item-name"><a class="struct" href="struct.GetClosestPeersOk.html" title="struct libp2p::kad::GetClosestPeersOk">GetClosestPeersOk</a></div><div class="desc docblock-short">The successful result of <a href="struct.Kademlia.html#method.get_closest_peers" title="method libp2p::kad::Kademlia::get_closest_peers"><code>Kademlia::get_closest_peers</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.KBucketDistance.html" title="struct libp2p::kad::KBucketDistance">KBucketDistance</a></div><div class="desc docblock-short">A distance between two keys in the DHT keyspace.</div></li><li><div class="item-name"><a class="struct" href="struct.KBucketKey.html" title="struct libp2p::kad::KBucketKey">KBucketKey</a></div><div class="desc docblock-short">A <code>Key</code> in the DHT keyspace with preserved preimage.</div></li><li><div class="item-name"><a class="struct" href="struct.KBucketRef.html" title="struct libp2p::kad::KBucketRef">KBucketRef</a></div><div class="desc docblock-short">A reference to a bucket.</div></li><li><div class="item-name"><a class="struct" href="struct.Kademlia.html" title="struct libp2p::kad::Kademlia">Kademlia</a></div><div class="desc docblock-short"><code>Kademlia</code> is a <code>NetworkBehaviour</code> that implements the libp2p
Kademlia protocol.</div></li><li><div class="item-name"><a class="struct" href="struct.KademliaConfig.html" title="struct libp2p::kad::KademliaConfig">KademliaConfig</a></div><div class="desc docblock-short">The configuration for the <code>Kademlia</code> behaviour.</div></li><li><div class="item-name"><a class="struct" href="struct.NoKnownPeers.html" title="struct libp2p::kad::NoKnownPeers">NoKnownPeers</a></div><div class="desc docblock-short">An operation failed to due no known peers in the routing table.</div></li><li><div class="item-name"><a class="struct" href="struct.PeerRecord.html" title="struct libp2p::kad::PeerRecord">PeerRecord</a></div><div class="desc docblock-short">A record either received by the given peer or retrieved from the local
record store.</div></li><li><div class="item-name"><a class="struct" href="struct.ProgressStep.html" title="struct libp2p::kad::ProgressStep">ProgressStep</a></div><div class="desc docblock-short">Information about progress events.</div></li><li><div class="item-name"><a class="struct" href="struct.ProviderRecord.html" title="struct libp2p::kad::ProviderRecord">ProviderRecord</a></div><div class="desc docblock-short">A record stored in the DHT whose value is the ID of a peer
who can provide the value on-demand.</div></li><li><div class="item-name"><a class="struct" href="struct.PutRecordOk.html" title="struct libp2p::kad::PutRecordOk">PutRecordOk</a></div><div class="desc docblock-short">The successful result of <a href="struct.Kademlia.html#method.put_record" title="method libp2p::kad::Kademlia::put_record"><code>Kademlia::put_record</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryId.html" title="struct libp2p::kad::QueryId">QueryId</a></div><div class="desc docblock-short">Unique identifier for an active query.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryMut.html" title="struct libp2p::kad::QueryMut">QueryMut</a></div><div class="desc docblock-short">A mutable reference to a running query.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryRef.html" title="struct libp2p::kad::QueryRef">QueryRef</a></div><div class="desc docblock-short">An immutable reference to a running query.</div></li><li><div class="item-name"><a class="struct" href="struct.QueryStats.html" title="struct libp2p::kad::QueryStats">QueryStats</a></div><div class="desc docblock-short">Execution statistics of a query.</div></li><li><div class="item-name"><a class="struct" href="struct.Record.html" title="struct libp2p::kad::Record">Record</a></div><div class="desc docblock-short">A record stored in the DHT.</div></li><li><div class="item-name"><a class="struct" href="struct.RecordKey.html" title="struct libp2p::kad::RecordKey">RecordKey</a></div><div class="desc docblock-short">The (opaque) key of a record.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AddProviderContext.html" title="enum libp2p::kad::AddProviderContext">AddProviderContext</a></div><div class="desc docblock-short">The context of a <a href="enum.QueryInfo.html#variant.AddProvider" title="variant libp2p::kad::QueryInfo::AddProvider"><code>QueryInfo::AddProvider</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.AddProviderError.html" title="enum libp2p::kad::AddProviderError">AddProviderError</a></div><div class="desc docblock-short">The possible errors when publishing a provider record.</div></li><li><div class="item-name"><a class="enum" href="enum.AddProviderPhase.html" title="enum libp2p::kad::AddProviderPhase">AddProviderPhase</a></div><div class="desc docblock-short">The phases of a <a href="enum.QueryInfo.html#variant.AddProvider" title="variant libp2p::kad::QueryInfo::AddProvider"><code>QueryInfo::AddProvider</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.BootstrapError.html" title="enum libp2p::kad::BootstrapError">BootstrapError</a></div><div class="desc docblock-short">The error result of <a href="struct.Kademlia.html#method.bootstrap" title="method libp2p::kad::Kademlia::bootstrap"><code>Kademlia::bootstrap</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetClosestPeersError.html" title="enum libp2p::kad::GetClosestPeersError">GetClosestPeersError</a></div><div class="desc docblock-short">The error result of <a href="struct.Kademlia.html#method.get_closest_peers" title="method libp2p::kad::Kademlia::get_closest_peers"><code>Kademlia::get_closest_peers</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetProvidersError.html" title="enum libp2p::kad::GetProvidersError">GetProvidersError</a></div><div class="desc docblock-short">The error result of <a href="struct.Kademlia.html#method.get_providers" title="method libp2p::kad::Kademlia::get_providers"><code>Kademlia::get_providers</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetProvidersOk.html" title="enum libp2p::kad::GetProvidersOk">GetProvidersOk</a></div><div class="desc docblock-short">The successful result of <a href="struct.Kademlia.html#method.get_providers" title="method libp2p::kad::Kademlia::get_providers"><code>Kademlia::get_providers</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetRecordError.html" title="enum libp2p::kad::GetRecordError">GetRecordError</a></div><div class="desc docblock-short">The error result of <a href="struct.Kademlia.html#method.get_record" title="method libp2p::kad::Kademlia::get_record"><code>Kademlia::get_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.GetRecordOk.html" title="enum libp2p::kad::GetRecordOk">GetRecordOk</a></div><div class="desc docblock-short">The successful result of <a href="struct.Kademlia.html#method.get_record" title="method libp2p::kad::Kademlia::get_record"><code>Kademlia::get_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.InboundRequest.html" title="enum libp2p::kad::InboundRequest">InboundRequest</a></div><div class="desc docblock-short">Information about a received and handled inbound request.</div></li><li><div class="item-name"><a class="enum" href="enum.KadConnectionType.html" title="enum libp2p::kad::KadConnectionType">KadConnectionType</a></div><div class="desc docblock-short">Status of our connection to a node reported by the Kademlia protocol.</div></li><li><div class="item-name"><a class="enum" href="enum.KademliaBucketInserts.html" title="enum libp2p::kad::KademliaBucketInserts">KademliaBucketInserts</a></div><div class="desc docblock-short">The configurable strategies for the insertion of peers
and their addresses into the k-buckets of the Kademlia
routing table.</div></li><li><div class="item-name"><a class="enum" href="enum.KademliaCaching.html" title="enum libp2p::kad::KademliaCaching">KademliaCaching</a></div><div class="desc docblock-short">The configuration for Kademlia “write-back” caching after successful
lookups via <a href="struct.Kademlia.html#method.get_record" title="method libp2p::kad::Kademlia::get_record"><code>Kademlia::get_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.KademliaEvent.html" title="enum libp2p::kad::KademliaEvent">KademliaEvent</a></div><div class="desc docblock-short">The events produced by the <code>Kademlia</code> behaviour.</div></li><li><div class="item-name"><a class="enum" href="enum.KademliaStoreInserts.html" title="enum libp2p::kad::KademliaStoreInserts">KademliaStoreInserts</a></div><div class="desc docblock-short">The configurable filtering strategies for the acceptance of
incoming records.</div></li><li><div class="item-name"><a class="enum" href="enum.Mode.html" title="enum libp2p::kad::Mode">Mode</a></div></li><li><div class="item-name"><a class="enum" href="enum.PutRecordContext.html" title="enum libp2p::kad::PutRecordContext">PutRecordContext</a></div><div class="desc docblock-short">The context of a <a href="enum.QueryInfo.html#variant.PutRecord" title="variant libp2p::kad::QueryInfo::PutRecord"><code>QueryInfo::PutRecord</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.PutRecordError.html" title="enum libp2p::kad::PutRecordError">PutRecordError</a></div><div class="desc docblock-short">The error result of <a href="struct.Kademlia.html#method.put_record" title="method libp2p::kad::Kademlia::put_record"><code>Kademlia::put_record</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.PutRecordPhase.html" title="enum libp2p::kad::PutRecordPhase">PutRecordPhase</a></div><div class="desc docblock-short">The phases of a <a href="enum.QueryInfo.html#variant.PutRecord" title="variant libp2p::kad::QueryInfo::PutRecord"><code>QueryInfo::PutRecord</code></a> query.</div></li><li><div class="item-name"><a class="enum" href="enum.QueryInfo.html" title="enum libp2p::kad::QueryInfo">QueryInfo</a></div><div class="desc docblock-short">Information about a running query.</div></li><li><div class="item-name"><a class="enum" href="enum.QueryResult.html" title="enum libp2p::kad::QueryResult">QueryResult</a></div><div class="desc docblock-short">The results of Kademlia queries.</div></li><li><div class="item-name"><a class="enum" href="enum.Quorum.html" title="enum libp2p::kad::Quorum">Quorum</a></div><div class="desc docblock-short">A quorum w.r.t. the configured replication factor specifies the minimum
number of distinct nodes that must be successfully contacted in order
for a query to succeed.</div></li><li><div class="item-name"><a class="enum" href="enum.RoutingUpdate.html" title="enum libp2p::kad::RoutingUpdate">RoutingUpdate</a></div><div class="desc docblock-short">The possible outcomes of <a href="struct.Kademlia.html#method.add_address" title="method libp2p::kad::Kademlia::add_address"><code>Kademlia::add_address</code></a>.</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.ALPHA_VALUE.html" title="constant libp2p::kad::ALPHA_VALUE">ALPHA_VALUE</a></div><div class="desc docblock-short">The <code>α</code> parameter of the Kademlia specification.</div></li><li><div class="item-name"><a class="constant" href="constant.K_VALUE.html" title="constant libp2p::kad::K_VALUE">K_VALUE</a></div><div class="desc docblock-short">The <code>k</code> parameter of the Kademlia specification.</div></li><li><div class="item-name"><a class="constant" href="constant.PROTOCOL_NAME.html" title="constant libp2p::kad::PROTOCOL_NAME">PROTOCOL_NAME</a></div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.AddProviderResult.html" title="type libp2p::kad::AddProviderResult">AddProviderResult</a></div><div class="desc docblock-short">The result of publishing a provider record.</div></li><li><div class="item-name"><a class="type" href="type.BootstrapResult.html" title="type libp2p::kad::BootstrapResult">BootstrapResult</a></div><div class="desc docblock-short">The result of <a href="struct.Kademlia.html#method.bootstrap" title="method libp2p::kad::Kademlia::bootstrap"><code>Kademlia::bootstrap</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.GetClosestPeersResult.html" title="type libp2p::kad::GetClosestPeersResult">GetClosestPeersResult</a></div><div class="desc docblock-short">The result of <a href="struct.Kademlia.html#method.get_closest_peers" title="method libp2p::kad::Kademlia::get_closest_peers"><code>Kademlia::get_closest_peers</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.GetProvidersResult.html" title="type libp2p::kad::GetProvidersResult">GetProvidersResult</a></div><div class="desc docblock-short">The result of <a href="struct.Kademlia.html#method.get_providers" title="method libp2p::kad::Kademlia::get_providers"><code>Kademlia::get_providers</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.GetRecordResult.html" title="type libp2p::kad::GetRecordResult">GetRecordResult</a></div><div class="desc docblock-short">The result of <a href="struct.Kademlia.html#method.get_record" title="method libp2p::kad::Kademlia::get_record"><code>Kademlia::get_record</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.PutRecordResult.html" title="type libp2p::kad::PutRecordResult">PutRecordResult</a></div><div class="desc docblock-short">The result of <a href="struct.Kademlia.html#method.put_record" title="method libp2p::kad::Kademlia::put_record"><code>Kademlia::put_record</code></a>.</div></li></ul></section></div></main></body></html>